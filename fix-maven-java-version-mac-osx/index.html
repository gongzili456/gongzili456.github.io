<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Mac如何更改maven的java版本 · Blog</title><meta name="description" content="Mac如何更改maven的java版本 - liuguili"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="https://github.com/gongzili456" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Mac如何更改maven的java版本</h1><div class="post-meta"><div class="post-time">Nov 21, 2014</div></div><div class="post-content"><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:compile (default-compile) on project api: Fatal error compiling: invalid target release: 1.7 -&#62; [Help 1]</span><br></pre></td></tr></table></figure>
<p>根据错误提示<code>invalid target release: 1.7</code>，无效的目标版本。</p>
<p>###查看pom.xml文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">version</span>&gt;</span>3.2<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="title">source</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="title">target</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>根据配置可以看出<code>maven-compiler-plugin</code>的目标版本是JDK 1.7；</p>
<p>###查看JDK版本<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  ~  java -version&#10;java version &#34;1.7.0_71&#34;&#10;Java(TM) SE Runtime Environment (build 1.7.0_71-b14)&#10;Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)</span><br></pre></td></tr></table></figure></p>
<p>根据上面信息可以看出我的jdk版本也是1.7；</p>
<p>那么问题出在哪里了呢？</p>
<p>###查看Maven信息</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  ~  mvn -v&#10;Apache Maven 3.2.1 (ea8b2b07643dbb1b84b6d16e1f08391b666bc1e9; 2014-02-15T01:37:52+08:00)&#10;Maven home: /usr/local/Cellar/maven/3.2.1/libexec&#10;Java version: 1.7.0_71, vendor: Oracle Corporation&#10;Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home&#10;Default locale: zh_CN, platform encoding: UTF-8&#10;OS name: &#34;mac os x&#34;, version: &#34;10.10&#34;, arch: &#34;x86_64&#34;, family: &#34;mac&#34;</span><br></pre></td></tr></table></figure>
<p>终于真想大白了，原来maven引用的是1.6的版本，那么如何修改配置为1.7版本呢？</p>
<p>原来，maven读两个配置文件，<code>/etc/mavenrc</code> 和 <code>~/.mavenrc</code>。两个文件默认是没有的，可以任意选择一个做修改，我选择我用户目录下的<code>~/.mavenrc</code>，将下面代码写入。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=`/usr/libexec/java_home`</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果你在Mac上安装了多个版本的JDK，而又不想改变默认的JDK版本，那么你只需要在配置后面加上版本号即可，比如:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=`/usr/libexec/java_home -v 1.7`</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>在Mac中<code>/usr/libexec/java_home</code>表示<code>java_home</code>的一个连接文件。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  ~  ll /usr/libexec/java_home&#10;lrwxr-xr-x  1 root  wheel    79B 11 14 16:39 /usr/libexec/java_home -&#62; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java_home</span><br></pre></td></tr></table></figure>
<p>然后在执行</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  ~  mvn -v&#10;Apache Maven 3.2.1 (ea8b2b07643dbb1b84b6d16e1f08391b666bc1e9; 2014-02-15T01:37:52+08:00)&#10;Maven home: /usr/local/Cellar/maven/3.2.1/libexec&#10;Java version: 1.7.0_71, vendor: Oracle Corporation&#10;Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/jre&#10;Default locale: zh_CN, platform encoding: UTF-8&#10;OS name: &#34;mac os x&#34;, version: &#34;10.10&#34;, arch: &#34;x86_64&#34;, family: &#34;mac&#34;</span><br></pre></td></tr></table></figure>
<p>然后在install项目就没有这个错误了。</p>
</div></article></div></section><footer><div class="paginator"><a href="/install-ghost-on-centos/" class="prev">上一篇</a><a href="/istat-menu-5-02-zhu-ce-ma/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'geeekr-blog';
var disqus_identifier = 'fix-maven-java-version-mac-osx/';
var disqus_title = 'Mac如何更改maven的java版本';
var disqus_url = 'http://geeekr.com/fix-maven-java-version-mac-osx/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//geeekr-blog.disqus.com/count.js" async></script><div class="copyright"><p>© 2014 - 2016 <a href="http://geeekr.com">liuguili</a>, unless otherwise noted.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-50816576-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>